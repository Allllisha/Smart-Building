見積もりアプリ「スマート・ビルディング・プランナー」：最終要件定義

1. アプリケーション名
   スマート・ビルディング・プランナー (Smart Building Planner)

2. アプリケーションの目的
   「スマート・ビルディング・プランナー」は、建築プロジェクトにおける純粋な建築コストと運用後のランニングコストを、日影計算と環境データに基づいて高精度かつ視覚的に評価し、見積もりを提供する革新的なプラットフォームです。このアプリは、フォーム入力された情報から AI が BIM 準拠のデータを生成し、BIM ファイルを介して**「その場所に建築物が立ったらどうなるか」の 3D シミュレーションと、精巧な見積もりを算出することで、設計初期段階での迅速かつ最適な意思決定を支援し、設計者と施主間のコミュニケーションを劇的に円滑化します。また、日照、周辺環境、法規制、災害リスクを考慮した持続可能で高品質な建築**の企画・推進に特化して貢献します。

3. ターゲットユーザー
   建築設計事務所、工務店、建設会社: 設計提案、詳細見積もり作成、施主への説明、設計最適化。

個人施主: 住宅建設検討時の建築コストと運用コストの明確な把握、設計事務所や工務店との円滑な対話。

4. 主要機能要件
   4.1. プロジェクト管理と基本情報設定
   P1.1. プロジェクト作成・管理: 新規プロジェクトの作成、既存プロジェクトの保存、読み込み、複製、削除.

P1.2. ユーザー・アクセス管理: ユーザー認証（Azure AD 連携）、アカウント設定、プロジェクトの共有設定（閲覧・編集権限付与）.

P1.3. 敷地指定と基本情報入力:

地図インターフェース: 直感的な地図上での敷地位置の選択・指定（Mapbox 連携）. 現在の位置である東京都世田谷区を含む任意の場所を柔軟に指定可能.

住所・緯度経度入力: 住所を直接入力して敷地を特定.

敷地形状入力: マップ上でのポリゴン描画.

プロジェクト基本情報: プロジェクト名、用途、設計担当者名、顧客情報などの入力.

4.2. 環境データ連携と AI 解析
P2.1. 周辺環境データ自動取得・3D 表示:

指定敷地周辺の**地形データ（標高）**の取得と 3D モデル化（Mapbox API を利用）.

既存の建物フットプリントデータの取得と簡易的な 3D モデル化（Mapbox API を利用）.

POI（Point of Interest - 興味のある地点）データの表示（駅、学校、病院, 商業施設, 公園など）（Mapbox API を利用）.

道路網の表示（Mapbox API を利用）.

P2.2. 気象データ連携: 敷地位置に基づく地域ごとの日照量、気温、風向・風速、降水量などの詳細な気象データの取得（Open-Meteo API を利用）.

P2.3. 法規制データ連携:

都市計画情報（AI 解析・抽出）： 用途地域、建ぺい率、容積率、高さ制限など、地域に適用される基本的な都市計画情報を表示. これは、Web 上の公開情報（各自治体 Web サイトなど）を AI で解析・抽出する、または初期データベースとして事前に収集された情報として連携する.

詳細日影規制情報の AI による自動取得・適用: 敷地所在地の県・市ごとに定められた、日影規制に関する詳細な条例データ（Web 公開情報）を AI（Azure Machine Learning および Azure OpenAI Service GPT-4o）が中心となり検索・解析し、以下のパラメータを自動取得・適用します:

規制対象となる地域・区域（例：第一種・第二種低層住居専用地域、近隣商業地域など）

規制対象となる建築物の条件（例：軒高が 7m を超える建築物、高さが 10m を超える建築物、地上階数 3 以上など）

測定面（平均地盤面からの高さ）（例：1.5m、4.0m）

測定時間帯（例：冬至日において午前 8 時～午後 4 時）

境界線から 5m を超え 10m 以内の範囲における許容日影時間（例：3 時間）

境界線から 10m を超える範囲における許容日影時間（例：2 時間）

取得方法: Azure の Bing などの Web 検索機能（Azure AI Search / Bing Search API）を活用した各自治体ウェブサイトの検索、Web スクレイピング、PDF/HTML 解析、AI による情報抽出・構造化を通じて情報を取得します。

建築基準法、その他の地域ごとの条例に関する情報の参照.

P2.4. 災害リスクデータ連携:

ハザードマップ（洪水、地震、土砂災害など）のデータ取得（各自治体 Web サイトの公開情報からの Web スクレイピング/コンテンツ解析を利用）. これにも Azure の Bing などの Web 検索機能（Azure AI Search / Bing Search API）を活用します.

4.3. 設計データ入力・AI 解析・BIM 生成
P3.1. 敷地情報と設計情報の連動および手動入力（フォーム形式）：

ユーザーは、Web インターフェース上のフォームを通じて、以下の情報を手動で入力する. 建物の用途（共同住宅、専用住宅、商業施設、オフィスなど）や規模に応じて、入力項目が AI によって動的に変化する。

敷地情報からの AI による自動連動:

P1.3 で指定された敷地の緯度経度・住所 と、P2.3 で AI が取得・解析した法規制データ（都市計画情報、日影規制詳細） が、フォームの該当項目に自動的に反映される、またはユーザーへの参考情報として提示されます.

例：「用途地域」のプルダウンには、AI が解析した当該敷地の用途地域が推奨値として表示されるか、隣に法規上の用途地域が明示されます.

「日影規制」の項目には、該当する自治体の具体的な日影規制のパラメータが参考情報として提示されます.

「建ぺい率」「容積率」「高さ制限」なども、ユーザーの入力欄の横に、法規上の制限値がリアルタイムで表示され、入力の指針となります.

手動入力項目:

建物概要: 建築用途（例: 共同住宅、専用住宅、商業施設、オフィス）, 構造（例: 壁式鉄筋コンクリート造、木造軸組工法、鉄骨造）, 規模：階数（例: 5 階建）、戸数（共同住宅の場合のみ表示、例: 18 戸）、延床面積（オフィス・商業施設の場合など）, 最高高さ (設計 GL より)：[数値入力] mm, 基礎高さ：[数値入力] mm.

敷地関連概要（連動情報との確認・手動調整）： 地目, 敷地面積, 有効敷地面積, 用途地域, 高度地区, 日影規制, その他地域地区（例: 準防火地域, 宅地造成規制区域）. 行政指導・要綱（都計法開発行為, 行政指導, みどりの条例, 景観計画, 福祉環境整備要綱, 中高層条例, 盛土規制法に関する「有／無」の選択（AI が建物の規模や用途に応じて表示・関連性を判断））.

面積情報: 建築面積, 延面積, 容積対象面積, 施工面積, 各階の面積詳細（面積表）：住戸部分（専有面積、MB 等）、容積対象部分（階段・廊下・ELV 等）、非容積対象部分（駐車駐輪場、開放廊下開放階段）など、各階ごとの面積を手動入力（AI が共同住宅の場合に詳細表示を促す。オフィス・商業施設の場合はフロア面積やテナント区画面積など）.

住戸タイプ別情報（共同住宅の場合のみ表示）： タイプ名、専有面積、MB 他面積、バルコニー面積、戸数、間取りタイプ（2LDK, 3LDK など）.

駐車場・駐輪場・緑地計画： 駐車場台数（例: 6 台）, 駐輪場台数（例: 18 台）, バイク置場台数（例: 6 台）, 緑地面積（例: 65.0㎡）.

特記事項：[テキスト入力]（例: 敷地の面積・形状・方位については実測の必要があります、関係官庁との打合せは未了ですなど）.

P3.2. AI による BIM 準拠情報生成（中核機能）：

P3.1 で入力されたフォームデータを AI（Azure Machine Learning および Azure OpenAI Service GPT-4o）が解析し、建築の専門知識とパターン認識を駆使して BIM ファイル生成に必要な精巧で構造化された情報（例：部屋の寸法と属性、壁の種類と厚さ、窓のタイプと正確な配置座標、建材のプロパティ、構造部材の寸法など）を生成します. これは、抽象的なフォーム入力から具体的な建築要素を導き出す AI の「設計意図構造化」フェーズです.

P3.3. BIM ファイル（IFC 形式）の自動生成（中核機能）：

P3.2 で AI が生成した BIM 準拠情報に基づき、バックエンドで IFC（Industry Foundation Classes）形式の BIM ファイルを自動生成します. この IFC ファイルは、建物のすべての設計情報、幾何学的情報、属性情報、および関係性を標準形式で保持します. これには、MIT ライセンスの Text2BIM のようなオープンソースライブラリの活用を検討します.

4.4. 3D シミュレーションと可視化
P4.1. 3D モデル生成・ビジュアライゼーション: P3.3 で生成された BIM ファイル（IFC）を読み込み、建材の質感や色を反映した計画建物の高品質な 3D モデルを自動生成します. この 3D モデルは、「もしその建物がその地図や場所に立ったらどうなるか」という完成予定図の参考（ビジュアライゼーション）として、そして日影計算結果を視覚的に提示するツールとして機能します。

目的外: 意匠的な完璧な再現性や写真のようなリアリティは追求せず、あくまでシミュレーションの補助と分かりやすい表現を主目的とします。

P4.2. 複合 3D 環境表示: 計画建物を、P2.1 で生成されたリアルな周辺環境（地形、既存建物、道路、POI）の中に配置し、統合された 3D ビューを提供.

P4.3. リアルタイム日影シミュレーション:

太陽位置計算: 任意の日時（年月日、時分）設定に基づく太陽位置計算（現在の位置情報である東京都世田谷区の緯度経度を考慮）.

影のリアルタイム表示: 計画建物および周辺への影のリアルタイム表示。影の長さ、方向、濃淡を正確に再現. これは 3D モデルが持つ幾何学的な正確さを利用し、精巧な日影計算の結果を視覚化します。

日照可視化: 年間日照時間/日影時間のヒートマップ表示（敷地内、建物の立面、周辺への影響）.

ボリュームチェックとしての法規制判定（AI 駆動）： 日影シミュレーション結果に基づき、P2.3 で AI が解析・取得した都市計画情報および敷地所在地の詳細な日影規制条例に計画建物が適合しているかを AI が自動で判定. 規制超過の場合、警告表示とともに、設計変更の必要性やその影響（例：建物の高さ・形状の変更による延床面積の増減、コストへの影響など）を提示します. これにより、建築が法的に可能かどうかの判断支援を AI が行います.

P4.4. 視点操作: 自由なカメラワーク（回転、ズーム、パン）、視点保存、標準視点（上空、鳥瞰、真北など）設定.

P4.5. ウォークスルー/フライスルー機能: 3D モデル内（および周辺環境）を仮想的に移動し、空間や景観を体感する機能.

P4.6. 外部環境要素の可視化:

風向・風速シミュレーション（簡易的な可視化、オプション）.

プライバシーシミュレーション（隣接建物からの視線経路可視化、オプション）.

4.5. AI 駆動型見積もり生成と最適化
P5.1. 基本建築コスト算出（AI 駆動）：

P3.3 で生成された BIM ファイル（IFC）から AI が詳細な数量情報（Quantity Take-off）を自動抽出し、これに基づき精巧な工事費（躯体、内外装、設備、付帯工事）の概算を自動算出.

資材価格データベース（クラウド連携）、人件費、運搬費などの最新市場データに基づいたリアルタイムな価格反映.

P5.2. 周辺環境・地域特性によるコスト補正（AI 駆動）：

地域コスト特性: 地域の物価指数、人件費水準、施工難易度、運搬効率などを AI が学習し、基本建築コストへ補正を適用.

法規制遵守コスト: P4.3 の日影規制判定の結果、高さ制限、防火地域指定など、地域特有の法規制遵守のために必要となる設計変更や建材追加のコストを AI が予測・計上.

P5.3. 環境性能による運用コスト予測（AI 駆動）：

推定年間エネルギーコスト（冷暖房費）: P4.3 の日影シミュレーション結果、建物の断熱性能、窓の配置・性能、気象データに基づき、AI が年間の冷暖房費を試算し、削減効果を金額で提示.

太陽光発電システム効果: 太陽光パネル設置時の発電量予測、売電益、設置コスト、初期回収年数を試算.

P5.4. 災害リスクによる追加コスト予測（AI 駆動）：

ハザードマップ連携: P2.4 で連携した災害リスクデータに基づき、敷地の洪水、地震、土砂災害などのリスクレベルを AI が評価.

推奨される対策費用: リスクに応じた地盤改良、補強工事、特定の建材導入などの概算追加費用を AI が提示.

P5.5. 建築物固有の価値評価（参考）（AI 駆動）：

利便性評価: POI 密度などに基づき、物件の居住性や機能性に与える影響を AI が定性的に評価.

資産価値推移予測: 地域における一般的な需要や物件の特性（エネルギー効率、デザイン、機能性など）から、将来的な建築物の資産価値の変動を AI が簡易的に予測（オプション）.

P5.6. リアルタイム見積もり更新（AI 駆動）： ユーザーが入力フォームの設計要素（例：階数変更、建材選択、窓の増減）を調整すると、AI が BIM 準拠情報を再生成し、BIM ファイルを更新. それに基づいて見積もり内容が瞬時に再計算され、パネルの数字がリアルタイムで更新されます.

P5.7. 見積もりシナリオ比較: 複数の設計案、建材オプション、設備仕様など、異なる条件での見積もりを並列で比較表示する機能.

P5.8. AI による見積もり説明・根拠提示（重要機能）：

AI（Azure OpenAI Service GPT-4o） が、算出した見積もり総額および各内訳項目について、その金額になった具体的な理由と根拠を自然言語で分かりやすく説明します.

コスト増減要因の明示:

設計変更の影響：設計変更による見積もり変動要因と増減額を説明.

環境要因の影響：日影シミュレーション結果、ハザードマップなどの環境データが各コスト項目や運用コストにどう影響したかを明確に示します.

法規制の影響：P4.3 の日影規制判定の結果に基づく、法規制適合のための設計変更が、延床面積や工事費に与えた影響を説明.

提案の背景説明: AI からの最適化提言の背景にある分析データや期待される効果を提示.

データ根拠の表示: 参照した具体的な数値データや情報源（例：〇〇年の日射量データ提供元: Open-Meteo の特定のデータセット、ハザードマップ提供元: 〇〇市公式サイトの〇〇ハザードマップへの直接リンク、日影規制条例の根拠: 〇〇市公式サイトの条例ページへの直接リンク）を提示し、信頼性を確保します. ユーザーはアプリ上でこれらのリンクをクリックして、情報元を直接確認できます.

4.6. レポート出力と共有
P6.1. 詳細見積もりレポート生成:

ご提示いただいた Claude AI 形式（https://claude.ai/share/105a6767-0d9e-445f-857f-efed49355fb6）をベースに、以下の情報を網羅したレポートをPDF形式などで出力.

見積書概要項目（参照ページ準拠）.

建築工事費内訳書（参照ページ準拠：基礎工事関連、躯体工事関連、外装・内装工事、電気設備関連、給排水・衛生設備関連、空調・換気設備関連、その他工事、仮設・追加工事、設計・諸経費）.

AI によるコスト要因分析と補正（詳細説明）: 敷地特性、日照条件、法規制、災害リスク、環境性能がコストにどう影響したかの具体的な説明.

3D シミュレーション画像（完成予想、日影シミュレーション）.

AI による総合評価と提言: エネルギー効率、不動産としての建築物の価値、リスク対応、最適化提案.

注意事項・補足事項.

P6.2. 3D モデル画像/動画エクスポート: 3D モデルの静止画（高解像度）、日影シミュレーション動画などをエクスポート.

P6.3. データエクスポート: 見積もりデータを CSV, Excel などの形式でエクスポート.

5. 非機能要件
   N1. パフォーマンス: 大規模な 3D モデルのレンダリング、AI 推論処理、リアルタイムなデータ更新において、高い処理速度と低遅延性（特に Web UI の応答性）を確保.

N2. スケーラビリティ: プロジェクト数、同時接続ユーザー数の増加に柔軟に対応できるシステムアーキテクチャ. Azure App Service のスケーリング機能、Azure Database for PostgreSQL の柔軟な拡張性で対応.

N3. セキュリティ:

ユーザー認証・認可（Azure AD）.

プロジェクトデータ、個人情報の保存・転送における暗号化（HTTPS, データ暗号化）.

N4. データ精度と品質: AI モデルの継続的な学習と、最新の市場データ, 法規制データへの定期的な更新による見積もり精度の維持・向上. これには、AI による説明の正確性も含まれます.

N5. ユーザーインターフェース (UI/UX):

直感的で分かりやすく、建築や AI の専門知識がなくてもスムーズに操作できる UI/UX 設計.

3D モデル操作の容易性、情報提示の明確性.

レスポンシブデザイン（デスクトップ、タブレット対応）.

N6. 可用性: Azure App Service の SLA に準拠した高可用性（99.95%以上）、Azure Database for PostgreSQL の自動バックアップとフェイルオーバー.

N7. 互換性: 外部データ形式（気象、ハザードマップなど）への対応.

6. 技術要件 (Azure クラウド環境特化)
   6.1. アプリケーションアーキテクチャ
   フロントエンド: Web ブラウザベースのシングルページアプリケーション (SPA)。

言語/フレームワーク: React.js / Vue.js / Angular

BIM ビューア/3D レンダリングライブラリ:

web-ifc-viewer (Three.js ベース): IFC ファイルをブラウザで読み込み、レンダリングするためのライブラリ. Three.js の既存環境に容易に統合可能で、P3.3 で生成される IFC ファイルの表示を担う中核となります。

Three.js / Babylon.js: web-ifc-viewer の基盤として、または周辺環境の 3D 化や追加の視覚効果（影の描画、マテリアルの質感向上など）のために活用.

バックエンド API: フロントエンドからのリクエスト処理、ビジネスロジック、AI 推論、データベース・外部サービス連携。

言語/フレームワーク: Python (Django / Flask) / Node.js (Express) / .NET Core

コンテナ化: 各サービス（フロントエンド、バックエンド API、AI 推論サービスなど）を Docker コンテナとしてパッケージ化。

AI/機械学習コンポーネント: 設計情報解析、コスト予測、環境性能予測などを行う AI モデル。

言語/ライブラリ: Python (TensorFlow / PyTorch / Scikit-learn / OpenCV / Pandas)

6.2. Azure サービス構成
Web アプリケーションホスティング:

Azure App Service (Web App for Containers): フロントエンドコンテナとバックエンド API コンテナをデプロイするメインの実行環境。自動スケーリング設定を有効にし、負荷に応じたリソース調整。

Azure Container Registry (ACR): アプリケーションの Docker イメージ（フロントエンド、バックエンド、AI サービス）を一元的に保存、管理、バージョン管理。

データベース:

Azure Database for PostgreSQL (Flexible Server): プロジェクトデータ、ユーザーデータ、建材・コスト基準データ、AI モデルの学習用データ（一部）など、RDB として管理するすべての永続データ。高い信頼性、スケーラビリティ、セキュリティ。

AI/機械学習:

Azure Machine Learning: 入力された設計情報（P3.1）の解析、P3.2 での BIM 準拠情報生成（構造化されたパラメータの出力）、コスト予測、エネルギー効率予測など、数値計算や高度なパターン認識に特化した ML モデルの開発・デプロイに活用。

Azure OpenAI Service (GPT-4o):

上記 ML モデルが出力した数値データや判断結果を基に、ユーザー向けに分かりやすい説明、補足コメント、提言などを生成する役割.

見積もりレポートにおける「AI によるコスト要因分析と補正（詳細説明）」や「AI による総合評価と提言」セクションの自然言語生成.

法規制のテキストデータ（例：特定の条例条文）を解釈し、適合判断の基準を提供したり、不適合時の推奨変更点をアドバイスしたりする知識ベース支援.

チャットボット形式のユーザーサポート。

ストレージ:

Azure Blob Storage: 生成されたレポート（PDF）、BIM ファイル、3D モデルデータ、画像、動画など、非構造化データの保存。階層型ネームスペース対応の Data Lake Storage Gen2 も検討。

認証・認可:

Azure Active Directory (Azure AD): ユーザー認証、認可、ロールベースアクセス制御 (RBAC)。

6.3. 外部データ連携
地図/GIS データプロバイダー API:

Mapbox API: Maps JavaScript API (地図表示), Places API (POI), Geocoding API (住所変換), Elevation API (標高), Roads API (道路情報) など.

用途: 地図表示、POI データ取得、標高データ取得、建物フット print データ取得（2D 輪郭）。

気象データ API:

Open-Meteo API: Historical Weather API (過去の気象データ), Solar Radiation API (太陽放射データ).

用途: 年間日照量・日射量データ、過去の気温・湿度・風速データ、傾斜面日射量予測。

地理空間情報・法規制データ:

自治体 Web サイトの公開情報（ハザードマップ等）: （Web スクレイピング/コンテンツ解析により情報を取得・利用）.

用途: ハザードマップ表示、法規制情報への参照（P2.3）。

詳細日影規制情報の Web サイト（都道府県・市区町村の公開情報）: （Web スクレイピング/コンテンツ解析により情報を取得・利用）.

用途: P2.3 で示された日影規制の詳細パラメータ（規制対象地域・建築物、測定面高さ、測定時間帯、境界線からの許容日影時間など）を自動取得し、P4.3 の日影シミュレーションに適用する。

Web 検索 API:

Azure AI Search / Bing Search API: 各自治体の Web サイトや公開情報（日影規制、ハザードマップなど）の URL を自動で検索・特定するために活用.

7. ユーザー体験 (UX) の流れ
   「スマート・ビルディング・プランナー」は、建築の専門家から個人施主まで、誰もが直感的かつ効率的にプロジェクトの全貌を把握し、最適な意思決定を下せるような体験を提供します。

7.1. 初期設定とプロジェクト開始
ログイン/アカウント作成: アプリを起動し、既存のアカウントでログインするか、Azure AD 連携で新規アカウントを作成します.

新しいプロジェクトの開始: ホーム画面から「新しいプロジェクトを作成」を選択します.

敷地を指定:

地図インターフェースが表示されます。指でピンを立てるように直感的に建設予定地を指定します（例：東京都世田谷区の特定の場所）.

住所を検索窓に入力して、ピンを正確な位置に移動することも可能です.

地図がズームインし、指定された敷地周辺の既存建物や地形が自動的に 3D で表示されます.

7.2. 設計情報の入力と BIM 生成
設計情報の入力: 「設計情報を入力」ボタンをタップし、以下のフォーム項目に手動で情報を入力します.

建物概要: 建築用途、構造、階数、戸数、最高高さ、基礎高さ.

駐車場・駐輪場計画: 駐車場台数、駐輪場台数、バイク置場台数.

緑地計画: 緑地面積.

住戸タイプ別情報（共同住宅の場合）: タイプ名、専有面積、MB 他面積、バルコニー面積、戸数、間取りタイプ（2LDK, 3LDK など）.

敷地関連概要: 地目、敷地面積、有効敷地面積、用途地域、高度地区、日影規制、その他地域地区（都計法開発行為、行政指導、みどりの条例、景観計画、福祉環境整備要綱、中高層条例、盛土規制法に関する情報）.

面積情報: 建築面積、延面積、容積対象面積、施工面積、各階の面積詳細.

特記事項: 例: 敷地の面積・形状・方位については実測の必要があります、関係官庁との打合せは未了ですなど.

AI による BIM 準拠情報生成と BIM ファイル生成: 入力されたフォームデータを AI が瞬時に解析し、BIM ファイル生成に必要な精巧な構造化情報を生成します. この情報に基づき、自動的に IFC 形式の BIM ファイルが生成されます.

初期 3D モデル表示: 生成された IFC ファイルから 3D モデルが読み込まれ、敷地のリアルな周辺環境の中に自動的に配置されて表示されます.

7.3. 3D シミュレーションとリアルタイムフィードバック
建物の内外観確認: 3D モデルを指先で自由に回転、ズーム、パン操作し、様々な角度から完成後の建物の外観や、周辺環境との調和を確認します.

日影シミュレーションとボリュームチェック:

画面上のスライダーやドロップダウンを使って、日付（例：夏至、冬至）や時刻（例：午前 9 時、正午、午後 3 時）を自由に設定します.

太陽の動きに合わせて、建物が落とす影の範囲や長さがリアルタイムに変化する様子を 3D ビューで確認できます. これは 3D モデルが持つ幾何学的な正確さを利用し、精巧な日影計算の結果を視覚化します.

年間日照時間や日影時間を色分けされたヒートマップで視覚的に把握できます.

日影規制への自動判定と警告: シミュレーション結果と法規制データ（日影規制など）を照合し、**「このままでは規制超過です。このままでは建築できません」といった明確なメッセージで警告します. 同時に、「規制をクリアするには、〇〇（高さ・形状など）を変更する必要があります」**といった具体的な示唆と、それに伴う延床面積の増減やコスト影響を提示します.

リアルタイム見積もりパネル:

3D モデルの横には、常に最新の見積もり概算が表示されるパネルがあります.

ユーザーが入力フォームの設計要素（例：階数変更、建材選択、窓の増減）を調整すると、AI が BIM 準拠情報を再生成し、BIM ファイルを更新。それに基づいて見積もり内容が瞬時に再計算され、パネルの数字がリアルタイムで更新されます.

この際、P5.8 AI による見積もり説明・根拠提示機能により、変更された部分の金額と、その変動理由が AI による説明として即座にポップアップまたはハイライト表示されます（例：「窓のサイズを大きくしたため、資材費が〇〇円増加し、同時に日射取得量増加により年間冷暖房費が〇〇円削減されます」）.

これにより、デザイン変更がコストやエネルギー効率にどう影響するかをすぐに確認でき、最適なバランスを見つけられます.

7.4. AI による詳細分析と最適化提言
コスト要因分析の表示: 見積もりパネルの横や、詳細ビューでは、AI が算出したコストの根拠が分かりやすく提示されます. これは単なる数値だけでなく、GPT-4o が生成する人間が理解しやすい解説文として提供されます.

「南面の大窓は年間の日射量を〇〇%効率的に取り込むため、冬季の暖房負荷を平均〇〇円削減します。」

「この地域はハザードマップ上、〇〇のリスクが指摘されているため、地盤改良に〇〇万円の追加費用が見込まれます。」

AI が参照した具体的なデータソース（例：〇〇年の日射量データ）も提示され、ユーザーは信頼性を確認できます.

シナリオ比較: 複数の設計案や建材オプションを保存し、それらの見積もりや環境性能（日照、エネルギー効率）を横並びで比較検討できます.

AI からの最適化提言: AI が現在の設計を分析し、コスト削減、エネルギー効率向上、快適性向上などの観点から、具体的な改善提案や追加投資の推奨を行います（例：「あと〇〇万円追加で、断熱性能を上げると年間電気代が〇〇円削減できます」）.

7.5. レポート作成と共有
レポートの生成: プロジェクトが固まったら、「レポート生成」ボタンをクリックします.

詳細見積もりレポートの確認: アプリ内で、ご提示いただいた Claude AI 形式の詳細な見積もりレポートが表示されます. 総額だけでなく、基礎、躯体、電気設備といった詳細な内訳、AI による分析、3D シミュレーションの画像も含まれます.

出力と共有: レポートを PDF 形式でエクスポートしたり、関係者（施主、施工会社など）に直接メールで共有したりできます. 3D モデルの画像や日影シミュレーションの動画も簡単にエクスポートし、プレゼンテーションに活用できます.
